(function(){"use strict";var e={760:function(e,t,s){var a=s(9242),r=s(3396);function o(e,t,s,o,n,i){const l=(0,r.up)("the-header"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r.Wm)(u,null,{default:(0,r.w5)((e=>[(0,r.Wm)(a.uT,{name:"route",mode:"out-in"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.Component)))])),_:2},1024)])),_:1})],64)}const n={class:"coach-title"},i={class:"coach-change"};function l(e,t,s,a,o,l){const u=(0,r.up)("router-link"),c=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("h2",null,[(0,r.Wm)(u,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Find a Coach")])),_:1})]),(0,r._)("div",i,[(0,r.Wm)(u,{to:"/coaches"},{default:(0,r.w5)((()=>[(0,r.Uk)("All Coaches")])),_:1}),(0,r.Wm)(u,{to:"/requests"},{default:(0,r.w5)((()=>[(0,r.Uk)("Requests")])),_:1}),(0,r.Wm)(u,{to:"/login"},{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1}),l.istoken?((0,r.wg)(),(0,r.j4)(c,{key:0,onClick:l.logout},{default:(0,r.w5)((()=>[(0,r.Uk)("Logout")])),_:1},8,["onClick"])):(0,r.kq)("",!0)])])}var u={computed:{istoken(){return this.$store.getters.istoken}},methods:{logout(){this.$store.dispatch("logout"),this.$router.replace("/coaches")}}},c=s(89);const d=(0,c.Z)(u,[["render",l],["__scopeId","data-v-1bfab0f0"]]);var h=d,m={components:{TheHeader:h},computed:{didLogout(){return this.$store.getters.isLogout}},created(){this.$store.dispatch("tryLogin")},watch:{didLogout(e,t){e&&e!==t&&this.$router.replace("/coaches")}}};const p=(0,c.Z)(m,[["render",o]]);var g=p,f=s(2483),w=s(7139);const v=(0,r._)("h2",null,"Interested ? Realy",-1);function _(e,t,s,a,o,n){const i=(0,r.up)("coach-base"),l=(0,r.up)("base-button"),u=(0,r.up)("router-view"),c=(0,r.up)("base-badge");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r._)("h2",null,(0,w.zw)(n.fullNamees),1),(0,r._)("h3",null,"$ "+(0,w.zw)(n.rates),1)])),_:1})]),(0,r._)("section",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r._)("header",null,[v,(0,r.Wm)(l,{to:"/requests"},{default:(0,r.w5)((()=>[(0,r.Uk)("Requests")])),_:1})]),(0,r.Wm)(u)])),_:1})]),(0,r._)("section",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.areas,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.id,title:t},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,w.zw)(e.description),1)])),_:2},1032,["title"])))),128))])),_:1})])])}var k={props:["id"],data(){return{selectedCoach:null}},created(){this.selectedCoach=this.$store.getters["Coaches/coaches"].find((e=>e.id===this.id))},computed:{fullNamees(){return this.selectedCoach.firstName+""+this.selectedCoach.lastName},areas(){return this.selectedCoach.areas},rates(){return this.selectedCoach.hourlyRate}}};const y=(0,c.Z)(k,[["render",_]]);var b=y;const C=e=>((0,r.dD)("data-v-a4b3d282"),e=e(),(0,r.Cn)(),e),q=C((()=>(0,r._)("section",null,null,-1))),I={key:1,class:"coach-item"},U={key:2};function D(e,t,s,a,o,n){const i=(0,r.up)("base-dialog"),l=(0,r.up)("coach-filter"),u=(0,r.up)("base-button"),c=(0,r.up)("base-spinner"),d=(0,r.up)("coach-item"),h=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{show:!!o.error,onClose:n.haserror,title:"An error"},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,w.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,r._)("section",null,[(0,r.Wm)(l,{onSetChange:n.setFilter},null,8,["onSetChange"])]),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[q,(0,r._)("section",null,[(0,r.Wm)(u,{onClick:t[0]||(t[0]=e=>n.loadCoaches(!0))},{default:(0,r.w5)((()=>[(0,r.Uk)("Refresh")])),_:1}),n.istoken?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(u,{key:0,link:"",to:"/login?redirect=register"},{default:(0,r.w5)((()=>[(0,r.Uk)("Login to")])),_:1})),!n.istoken||n.isUserId||o.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(u,{key:1,link:"",to:"/register"},{default:(0,r.w5)((()=>[(0,r.Uk)("Register as Coach")])),_:1}))]),o.isLoading?((0,r.wg)(),(0,r.j4)(c,{key:0})):n.hasCoaches?((0,r.wg)(),(0,r.iD)("div",I,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.fistCoatch,(e=>((0,r.wg)(),(0,r.j4)(d,{key:e.id,id:e.id,"first-name":e.firstName,"last-name":e.lastName,areas:e.areas,description:e.description,rate:e.hourlyRate},null,8,["id","first-name","last-name","areas","description","rate"])))),128))])])):((0,r.wg)(),(0,r.iD)("h3",U,"No coaches found."))])),_:1})])}const W={class:"coach-areas"},x={class:"coach-button"};function $(e,t,s,a,o,n){const i=(0,r.up)("base-badge"),l=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("li",null,[(0,r._)("h3",null,(0,w.zw)(n.fullName),1),(0,r._)("h4",null,"Number:"+(0,w.zw)(s.rate),1),(0,r._)("div",W,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.areas,(e=>((0,r.wg)(),(0,r.j4)(i,{key:e,title:e,type:e},null,8,["title","type"])))),128))]),(0,r._)("div",x,[(0,r.Wm)(l,{class:"coach coach-contact",link:"",to:n.coachContact},{default:(0,r.w5)((()=>[(0,r.Uk)("Contact")])),_:1},8,["to"]),(0,r.Wm)(l,{class:"coach coach-view",link:"",to:n.coachView},{default:(0,r.w5)((()=>[(0,r.Uk)("View Details")])),_:1},8,["to"])])])}var F={props:["id","firstName","lastName","rate","areas"],computed:{fullName(){return this.firstName+""+this.lastName},coachContact(){return"/coaches/"+this.id+"/contact"},coachView(){return"/coaches/"+this.id}}};const j=(0,c.Z)(F,[["render",$],["__scopeId","data-v-45280768"]]);var N=j;const L=(0,r._)("h2",null,"Find Your Coach",-1),S=(0,r._)("label",{for:"joker"},"JOKER",-1),R=(0,r._)("label",{for:"again"},"Again",-1),E=(0,r._)("label",{for:"rose"},"Rose",-1);function Z(e,t,s,a,o,n){const i=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[L,(0,r._)("span",null,[(0,r._)("input",{type:"checkbox",id:"joker",checked:"",onChange:t[0]||(t[0]=(...e)=>n.setFilter&&n.setFilter(...e))},null,32),S]),(0,r._)("span",null,[(0,r._)("input",{type:"checkbox",id:"again",checked:"",onChange:t[1]||(t[1]=(...e)=>n.setFilter&&n.setFilter(...e))},null,32),R]),(0,r._)("span",null,[(0,r._)("input",{type:"checkbox",id:"rose",checked:"",onChange:t[2]||(t[2]=(...e)=>n.setFilter&&n.setFilter(...e))},null,32),E])])),_:1})])}var T={emits:["set-change"],data(){return{filters:{joker:!0,again:!0,rose:!0}}},methods:{setFilter(e){const t=e.target.id,s=e.target.checked,a={...this.filters,[t]:s};this.filters=a,this.$emit("set-change",a)}}};const O=(0,c.Z)(T,[["render",Z]]);var V=O,B={data(){return{error:null,isLoading:!1,setFilteractive:{joker:!0,again:!0,rose:!0}}},components:{CoachItem:N,CoachFilter:V},computed:{istoken(){return this.$store.getters.istoken},isUserId(){return this.$store.getters["Coaches/isUserId"]},fistCoatch(){const e=this.$store.getters["Coaches/coaches"];return e.filter((e=>!(!this.setFilteractive.joker||!e.areas.includes("joker"))||(!(!this.setFilteractive.again||!e.areas.includes("agian"))||!(!this.setFilteractive.rose||!e.areas.includes("rose")))))},hasCoaches(){return!this.isLoading&&this.$store.getters["Coaches/hasCoaches"]}},created(){this.loadCoaches()},methods:{setFilter(e){this.setFilteractive=e},async loadCoaches(e=!1){this.isLoading=!0;try{await this.$store.dispatch("Coaches/loadCoaches",{forlastFeach:e})}catch(t){this.error=t.message||"Something went wrong"}this.isLoading=!1},haserror(){this.error=null}}};const z=(0,c.Z)(B,[["render",D],["__scopeId","data-v-a4b3d282"]]);var A=z;const M=(0,r._)("h2",null,"Register as a coach",-1);function P(e,t,s,a,o,n){const i=(0,r.up)("coach-form"),l=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[M,(0,r.Wm)(i,{onSetAdd:n.setadd},null,8,["onSetAdd"])])),_:1})])}const H=e=>((0,r.dD)("data-v-1154951f"),e=e(),(0,r.Cn)(),e),K={class:"form-control"},Y={key:0},G={class:"form-control"},J={key:0},Q={class:"form-control"},X={key:0},ee={class:"form-control"},te={key:0},se={class:"form-control"},ae=H((()=>(0,r._)("label",{for:"joker"},"JOKER",-1))),re=H((()=>(0,r._)("label",{for:"again"},"Again",-1))),oe=H((()=>(0,r._)("label",{for:"rose"},"Rose",-1)));function ne(e,t,s,o,n,i){const l=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[14]||(t[14]=(0,a.iM)(((...e)=>i.setadd&&i.setadd(...e)),["prevent"]))},[(0,r._)("div",K,[(0,r._)("label",{for:"firstname",class:(0,w.C_)({input:!n.firstname.isfrom})},"Firstname",2),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.firstname.val=e),onBlur:t[1]||(t[1]=e=>i.newverify("firstname"))},null,544),[[a.nr,n.firstname.val,void 0,{trim:!0}]]),n.firstname.isfrom?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",Y,"Is not Firstname"))]),(0,r._)("div",G,[(0,r._)("label",{for:"lastname",class:(0,w.C_)({input:!n.lastname.isfrom})},"Lastname",2),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.lastname.val=e),onBlur:t[3]||(t[3]=e=>i.newverify("lastname"))},null,544),[[a.nr,n.lastname.val,void 0,{trim:!0}]]),n.lastname.isfrom?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",J,"Is not Lastname"))]),(0,r._)("div",Q,[(0,r._)("label",{for:"description",class:(0,w.C_)({input:!n.description.isfrom})},"Description",2),(0,r.wy)((0,r._)("textarea",{id:"description",rows:"5","onUpdate:modelValue":t[4]||(t[4]=e=>n.description.val=e),onBlur:t[5]||(t[5]=e=>i.newverify("description"))},null,544),[[a.nr,n.description.val,void 0,{trim:!0}]]),n.description.isfrom?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",X,"Is not Description"))]),(0,r._)("div",ee,[(0,r._)("label",{for:"rate",class:(0,w.C_)({input:!n.rate.isfrom})},"Hourly Rate",2),(0,r.wy)((0,r._)("input",{id:"rate",type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>n.rate.val=e),onBlur:t[7]||(t[7]=e=>i.newverify("rate"))},null,544),[[a.nr,n.rate.val,void 0,{trim:!0}]]),n.rate.isfrom?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",te,"This Numbre is not"))]),(0,r._)("div",se,[(0,r._)("h3",{class:(0,w.C_)({input:!n.areas.isfrom})},"Areas of Expertise",2),(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:"joker",value:"joker","onUpdate:modelValue":t[8]||(t[8]=e=>n.areas.val=e),onBlur:t[9]||(t[9]=e=>i.newverify("areas"))},null,544),[[a.e8,n.areas.val]]),ae]),(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:"again",value:"again","onUpdate:modelValue":t[10]||(t[10]=e=>n.areas.val=e),onBlur:t[11]||(t[11]=e=>i.newverify("areas"))},null,544),[[a.e8,n.areas.val]]),re]),(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"checkbox",id:"rose",value:"rose","onUpdate:modelValue":t[12]||(t[12]=e=>n.areas.val=e),onBlur:t[13]||(t[13]=e=>i.newverify("areas"))},null,544),[[a.e8,n.areas.val]]),oe])]),(0,r.Wm)(l,{to:"/coaches"},{default:(0,r.w5)((()=>[(0,r.Uk)("Sumbit")])),_:1})],32)}var ie={emits:["set-add"],data(){return{firstname:{val:"",isfrom:!0},lastname:{val:"",isfrom:!0},description:{val:"",isfrom:!0},rate:{val:"",isfrom:!0},areas:{val:[],isfrom:!0},fillUser:!0}},methods:{newverify(e){this.fillUser=!0,""===this[e].val?(this[e].isfrom=!1,this.fillUser=!1):(this[e].isfrom=!0,this.fillUser=!0)},setadd(){const e={first:this.firstname.val,last:this.lastname.val,desc:this.description.val,rate:this.rate.val,areas:this.areas.val};console.log(e),this.$emit("set-add",e)}}};const le=(0,c.Z)(ie,[["render",ne],["__scopeId","data-v-1154951f"]]);var ue=le,ce={components:{CoachForm:ue},methods:{setadd(e){this.$store.dispatch("Coaches/registerCoach",e),this.$router.replace("/coaches")}}};const de=(0,c.Z)(ce,[["render",P]]);var he=de;const me={key:0};function pe(e,t,s,o,n,i){const l=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>i.newContact&&i.newContact(...e)),["prevent"]))},[(0,r._)("div",null,[(0,r._)("label",{for:"email",class:(0,w.C_)({input:!n.fillContact})},"Email:",2),(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email,void 0,{trim:!0}]])]),(0,r._)("div",null,[(0,r._)("label",{for:"message",class:(0,w.C_)({input:!n.fillContact})},"Message:",2),(0,r.wy)((0,r._)("textarea",{rows:"5",id:"message","onUpdate:modelValue":t[1]||(t[1]=e=>n.message=e)},null,512),[[a.nr,n.message,void 0,{trim:!0}]])]),(0,r._)("div",null,[n.fillContact?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",me,"This email or message is not text")),(0,r.Wm)(l,{to:"/coaches"},{default:(0,r.w5)((()=>[(0,r.Uk)("Sumbit")])),_:1})])],32)}var ge={data(){return{email:"",message:"",fillContact:!0,error:null}},methods:{newContact(){this.fillContact=!0,""!==this.email&&this.email.includes("@")&&""!==this.message?(this.$store.dispatch("requests/requestsClass",{email:this.email,message:this.message,coachId:this.$route.params.id}),this.$router.replace("/coaches")):this.fillContact=!1}}};const fe=(0,c.Z)(ge,[["render",pe],["__scopeId","data-v-18d8c502"]]);var we=fe;const ve={key:1},_e={key:2};function ke(e,t,s,a,o,n){const i=(0,r.up)("base-dialog"),l=(0,r.up)("base-spinner"),u=(0,r.up)("requests-item"),c=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{show:!!o.error,onClose:n.hasrequests},{default:(0,r.w5)((()=>[(0,r._)("p",null,(0,w.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,r._)("section",null,[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[o.isrequests?((0,r.wg)(),(0,r.j4)(l,{key:0})):n.hasreq&&!o.isrequests?((0,r.wg)(),(0,r.iD)("ul",ve,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.req,(e=>((0,r.wg)(),(0,r.j4)(u,{key:e.id,id:e.id,email:e.email,message:e.message},null,8,["id","email","message"])))),128))])):((0,r.wg)(),(0,r.iD)("p",_e,"This is not requests"))])),_:1})])])}function ye(e,t,s,a,o,n){return(0,r.wg)(),(0,r.iD)("li",null,[(0,r._)("div",null,[(0,r._)("h3",null,(0,w.zw)(s.id),1),(0,r._)("p",null,(0,w.zw)(s.email),1),(0,r._)("p",null,(0,w.zw)(s.message),1)])])}var be={props:["id","email","message"]};const Ce=(0,c.Z)(be,[["render",ye]]);var qe=Ce,Ie={data(){return{isrequests:!1,error:null}},components:{RequestsItem:qe},computed:{req(){return this.$store.getters["requests/requests"]},hasreq(){return this.$store.getters["requests/hasrequests"]}},created(){this.loadrequests()},methods:{async loadrequests(){this.isrequests=!0;try{await this.$store.dispatch("requests/fetchRequests")}catch(e){this.error=e.message||"is not message"}this.isrequests=!1},hasrequests(){this.error=null}}};const Ue=(0,c.Z)(Ie,[["render",ke]]);var De=Ue;const We=(0,r._)("h2",null,"This not true .com",-1);function xe(e,t){const s=(0,r.up)("router-link"),a=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[We,(0,r._)("p",null,[(0,r.Uk)("Try come back "),(0,r.Wm)(s,{to:"/coaches"},{default:(0,r.w5)((()=>[(0,r.Uk)("Coaches")])),_:1})])])),_:1})])}const $e={},Fe=(0,c.Z)($e,[["render",xe]]);var je=Fe,Ne=s(65),Le=(s(7658),{registerCoaches(e,t){e.coaches.push(t)},setCoaches(e,t){e.coaches=t},lastFeachtime(e){e.lastFeach=(new Date).getTime()}}),Se=s(70);const Re=Se.ZP.create({baseURL:"http://localhost:3000/",timeout:1e3});var Ee=Re,Ze={registerCoach(e,t){const s={firstName:t.first,lastName:t.last,description:t.desc,hourlyRate:t.rate,areas:t.areas},a=e.rootGetters.userId,r=e.rootGetters.token;Ee.post("/user/add",s).then((e=>{console.log(e)})).catch((e=>{console.log(e)})),console.log(r),console.log(a),e.commit("registerCoaches",{...s,id:a})},async loadCoaches(e,t){if(!t.forlastFeach&&!e.getters.newlastFeach)return;const s=[];await Ee.get("/user/add").then((e=>{console.log(e);for(const t in e.data){const a={id:e.data[t]._id,firstName:e.data[t].firstName,lastName:e.data[t].lastName,description:e.data[t].description,hourlyRate:e.data[t].hourlyRate,areas:e.data[t].areas};s.push(a),console.log(a)}})).catch((e=>{const t=new Error(e.message||"Failed to fetch");throw console.log(e),t})),console.log(s),e.commit("setCoaches",s),e.commit("lastFeachtime")}},Te={coaches(e){return e.coaches},hasCoaches(e){return e.coaches&&e.coaches.length>0},isUserId(e,t,s,a){const r=t.coaches,o=a.userId;return r.some((e=>e.id===o))},newlastFeach(e){const t=e.lastFeach,s=(new Date).getTime();return(s-t)/1e3>60}},Oe={namespaced:!0,state(){return{lastFeach:null,coaches:[{id:"c1",firstName:"Joker xue",lastName:"Again",areas:["joker","again","rose"],description:"人类用沙(杀)想捏出梦里通天塔",hourlyRate:"717"},{id:"c2",firstName:"Joker xue",lastName:"Again",areas:["agian"],description:"结构 | 让平分的阳光已穿不透",hourlyRate:"717"},{id:"c3",firstName:"Joker xue",lastName:"Rose",areas:["rose"],description:"结构 | 让平分的阳光已穿不透",hourlyRate:"717"}]}},mutations:Le,actions:Ze,getters:Te},Ve={addrequestsClass(e,t){e.requests.push(t)},setrequests(e,t){e.requests=t}},Be={requestsClass(e,t){const s={email:t.email,message:t.message};Ee.post("user/requests",s).then((e=>{s.id=e.data.id,console.log(e)})).catch((e=>{const t=new Error(e.message||"Failed to send request");throw console.log(t),t})),e.commit("addrequestsClass",s)},async fetchRequests(e){const t=e.rootGetters.userId,s=e.rootGetters.token;console.log(s),console.log(t);const a=[];await Ee.get("user/requests").then((e=>{console.log(e.data);for(const s in e.data){const r={id:s,coachId:t,email:e.data[s].email,message:e.data[s].message};a.push(r),console.log(r)}})).catch((e=>{const t=new Error(e.message||"is NOT MESSAGE");throw console.log(e),t})),e.commit("setrequests",a)}},ze={requests(e,t,s,a){const r=a.userId;return e.requests.filter((e=>e.coachId===r))},hasrequests(e,t){return t.requests&&t.requests.length>0}},Ae={namespaced:!0,state(){return{requests:[]}},mutations:Ve,actions:Be,getters:ze},Me={setUser(e,t){e.userId=t.userId,e.token=t.token},didLogout(e){e.islogout=!0}};let Pe;var He={async login(e,t){const s={name:t.name,email:t.email,password:t.password};return e.dispatch("auth",{...s,mode:"login"})},async signup(e,t){const s={email:t.email,password:t.password};return e.dispatch("auth",{...s,mode:"signup"})},async auth(e,t){const s=t.mode;let a="/user/login";"signup"===s&&(a="/user/authes");const r=[],o=[];let n="",i="";await Ee.post(a,t).then((e=>{if("signup"===s){if(1001===e.data.status){const t=new Error(e.message||"is not user");throw t}1002===e.data.status?alert("用户名存在"):(alert("注册成功"),r.push(e.data.data.token),o.push(e.data.data.id),console.log(e))}if(2001===e.data.status){alert(e.data.message);const t=new Error(e.message||"is not user");throw t}if(2002===e.data.status){alert(e.data.message);const t=new Error(e.message||"is not user");throw t}n=e.data.data.token,i=e.data.data._id,console.log(i),alert("登录成功")})).catch((e=>{throw e}));const l=7e3,u=(new Date).getTime()+l;localStorage.setItem("token",n),localStorage.setItem("userId",i),localStorage.setItem("userDate",u),Pe=setTimeout((function(){e.dispatch("authLogout")}),l),"signup"===s?e.commit("setUser",{token:r,userId:o}):e.commit("setUser",{token:n,userId:i})},tryLogin(e){const t=localStorage.getItem("token"),s=localStorage.getItem("userId"),a=localStorage.getItem("userDate"),r=a-(new Date).getTime();r<0||(Pe=setTimeout((function(){e.dispatch("authLogout")}),r),t&&s&&e.commit("setUser",{token:t,userId:s}))},logout(e){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userDate"),clearTimeout(Pe),e.commit("setUser",{token:null,userId:null})},authLogout(e){e.dispatch("logout"),e.commit("didLogout")}},Ke={userId(e){return e.userId},token(e){return e.token},istoken(e){return!!e.token},isLogout(e){return e.islogout}},Ye={state(){return{userId:null,token:null,islogout:!1}},mutations:Me,actions:He,getters:Ke};const Ge=(0,Ne.MT)({modules:{Coaches:Oe,requests:Ae,userauth:Ye}});var Je=Ge;const Qe=e=>((0,r.dD)("data-v-0ea3884c"),e=e(),(0,r.Cn)(),e),Xe={class:"user"},et={class:"user-error"},tt={key:0,class:"user-err_text"},st=Qe((()=>(0,r._)("label",{for:"email"},"Email:",-1))),at={key:0,class:"user-err_text"},rt=Qe((()=>(0,r._)("label",{for:"Password"},"Password:",-1))),ot={key:1,class:"user-err_text"},nt=Qe((()=>(0,r._)("label",{for:"Password"},"Again Password:",-1))),it={key:2,class:"user-err_text"};function lt(e,t,s,o,n,i){const l=(0,r.up)("base-dialog"),u=(0,r.up)("base-spinner"),c=(0,r.up)("base-button"),d=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",Xe,[(0,r.Wm)(l,{show:!!n.error,title:"注册失败 请重试",onClose:i.haserror},{default:(0,r.w5)((()=>[(0,r._)("p",et,(0,w.zw)(n.error),1)])),_:1},8,["show","onClose"]),(0,r.Wm)(l,{show:n.load,fixed:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u)])),_:1},8,["show"]),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r._)("form",{onSubmit:t[8]||(t[8]=(0,a.iM)(((...e)=>i.usersubmit&&i.usersubmit(...e)),["prevent"]))},[(0,r._)("div",null,[(0,r._)("label",{for:"name",class:(0,w.C_)({input:n.username.isuer})},"Name:",2),(0,r.wy)((0,r._)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.username.userval=e),onBlur:t[1]||(t[1]=e=>i.userchange("username"))},null,544),[[a.nr,n.username.userval,void 0,{trim:!0}]]),n.username.isuser?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",tt,"请输入用户名"))]),(0,r._)("div",null,[st,(0,r.wy)((0,r._)("input",{type:"email",id:"useremail","onUpdate:modelValue":t[2]||(t[2]=e=>n.useremail.userval=e),onBlur:t[3]||(t[3]=e=>i.userchange("useremail"))},null,544),[[a.nr,n.useremail.userval,void 0,{trim:!0}]])]),n.useremail.isuser?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",at,"请输入邮箱")),(0,r._)("div",null,[rt,(0,r.wy)((0,r._)("input",{type:"password",id:"userpassword","onUpdate:modelValue":t[4]||(t[4]=e=>n.userpassword.userval=e),onBlur:t[5]||(t[5]=e=>i.userchange("userpassword"))},null,544),[[a.nr,n.userpassword.userval,void 0,{trim:!0}]])]),n.userpassword.isuser?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",ot,"请输入密码")),(0,r._)("div",null,[nt,(0,r.wy)((0,r._)("input",{type:"password",id:"userpasswordes","onUpdate:modelValue":t[6]||(t[6]=e=>n.userpasswordes.userval=e),onBlur:t[7]||(t[7]=e=>i.userchange("userpasswordes"))},null,544),[[a.nr,n.userpasswordes.userval,void 0,{trim:!0}]])]),n.userpasswordes.isuser?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",it,"请输入第一次相同密码")),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Enroll")])),_:1}),(0,r.Wm)(c,{link:"",to:"/login"},{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1})],32)])),_:1})])}var ut={data(){return{username:{userval:"",isuser:!0},useremail:{userval:"",isuser:!0},userpassword:{userval:"",isuser:!0},userpasswordes:{userval:"",isuser:!0},userItem:!0,error:null,load:!1,showes:!0}},methods:{userchange(e){""===this[e].userval?this[e].isuser=!1:this[e].isuser=!0},userveiry(){this.userItem=!0,""===this.username.userval&&(this.username.isuser=!1,console.log("1"),this.userItem=!1),""!==this.useremail.userval&&this.useremail.userval.includes("@")||(this.useremail.isuser=!1,this.userItem=!1),this.userpassword.userval.length<6&&(this.userpassword.isuser=!1,this.userItem=!1),this.userpasswordes.userval!==this.userpassword.userval&&(this.userpasswordes.isuser=!1,this.userItem=!1)},async usersubmit(){if(this.userveiry(),this.userItem){this.userItem=!0,this.load=!0;try{await this.$store.dispatch("signup",{name:this.username.userval,email:this.useremail.userval,password:this.userpassword.userval})}catch(e){console.log(e),this.error=e.message}this.load=!1}},haserror(){this.error=null}}};const ct=(0,c.Z)(ut,[["render",lt],["__scopeId","data-v-0ea3884c"]]);var dt=ct;const ht=e=>((0,r.dD)("data-v-17b86ff2"),e=e(),(0,r.Cn)(),e),mt={class:"login"},pt={class:"login-con"},gt=ht((()=>(0,r._)("label",{for:"email"},"Email:",-1))),ft=ht((()=>(0,r._)("label",{for:"password"},"Password:",-1)));function wt(e,t,s,o,n,i){const l=(0,r.up)("base-button"),u=(0,r.up)("coach-base");return(0,r.wg)(),(0,r.iD)("div",mt,[(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>i.loginsumbit&&i.loginsumbit(...e)),["prevent"]))},[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r._)("div",pt,[(0,r._)("div",null,[gt,(0,r.wy)((0,r._)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]])]),(0,r._)("div",null,[ft,(0,r.wy)((0,r._)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,512),[[a.nr,n.password]])]),(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1}),(0,r.Wm)(l,{link:"",to:"/auth"},{default:(0,r.w5)((()=>[(0,r.Uk)("Signup instead")])),_:1})])])),_:1})],32)])}var vt={data(){return{email:"",password:""}},methods:{async loginsumbit(){if(this.loginItem=!0," "===this.email||!this.email.includes("@")||this.password.length<6)this.loginItem=!1;else try{await this.$store.dispatch("login",{email:this.email,password:this.password});const e="/"+(this.$route.query.redirect||"coaches");this.$router.replace(e)}catch(e){console.log(e)}}}};const _t=(0,c.Z)(vt,[["render",wt],["__scopeId","data-v-17b86ff2"]]);var kt=_t;const yt=(0,f.p7)({history:(0,f.PO)(),routes:[{path:"/",redirect:"/coaches"},{path:"/coaches",component:A},{path:"/coaches/:id",props:!0,component:b,children:[{path:"contact",component:we}]},{path:"/register",component:he,meta:{register:!0}},{path:"/requests",component:De,meta:{register:!0}},{path:"/auth",component:dt,meta:{register:!0}},{path:"/login",component:kt,meta:{registerUnauth:!0}},{path:"/:notFound(.*)",component:je}]});yt.beforeEach((function(e,t,s){e.meta.register&&!Je.getters.istoken?s("/login"):e.meta.registerUnauth&&Je.getters.istoken?s("/coaches"):s()}));var bt=yt,Ct=s(6423);function qt(e,t){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}const It={},Ut=(0,c.Z)(It,[["render",qt],["__scopeId","data-v-f4d142f2"]]);var Dt=Ut;function Wt(e,t,s,a,o,n){return(0,r.wg)(),(0,r.iD)("span",{class:(0,w.C_)(["badge",s.type])},(0,w.zw)(n.text),3)}var xt={props:["title","type"],computed:{text(){return this.title.toUpperCase()}}};const $t=(0,c.Z)(xt,[["render",Wt]]);var Ft=$t;function jt(e,t,s,a,o,n){const i=(0,r.up)("router-link");return s.link?((0,r.wg)(),(0,r.j4)(i,{key:1,to:s.to,class:(0,w.C_)(s.mode)},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to","class"])):((0,r.wg)(),(0,r.iD)("button",{key:0,class:(0,w.C_)(s.mode)},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],2))}var Nt={props:{mode:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"}}};const Lt=(0,c.Z)(Nt,[["render",jt],["__scopeId","data-v-d71f858e"]]);var St=Lt;const Rt={class:"loading"},Et=(0,r.uE)('<div class="loading-con" data-v-700de5c5><div class="loading-item" data-v-700de5c5></div><div class="loading-item" data-v-700de5c5></div><div class="loading-item" data-v-700de5c5></div><div class="loading-item" data-v-700de5c5></div><div class="loading-item" data-v-700de5c5></div></div><p data-v-700de5c5>Loading...</p>',2),Zt=[Et];function Tt(e,t){return(0,r.wg)(),(0,r.iD)("div",Rt,Zt)}const Ot={},Vt=(0,c.Z)(Ot,[["render",Tt],["__scopeId","data-v-700de5c5"]]);var Bt=Vt;const zt={key:0,open:""};function At(e,t,s,o,n,i){const l=(0,r.up)("base-button");return(0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[s.show?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>i.tryClose&&i.tryClose(...e)),class:"backdrop"})):(0,r.kq)("",!0),(0,r.Wm)(a.uT,{name:"dialog"},{default:(0,r.w5)((()=>[s.show?((0,r.wg)(),(0,r.iD)("dialog",zt,[(0,r._)("header",null,[(0,r.WI)(e.$slots,"header",{},(()=>[(0,r._)("h2",null,(0,w.zw)(s.title),1)]),!0)]),(0,r._)("section",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r._)("menu",null,[(0,r.WI)(e.$slots,"actions",{},(()=>[(0,r.Wm)(l,{onClick:i.tryClose},{default:(0,r.w5)((()=>[(0,r.Uk)("Close")])),_:1},8,["onClick"])]),!0)])])):(0,r.kq)("",!0)])),_:3})])}var Mt={emits:["close"],props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1}},methods:{tryClose(){this.fixed||this.$emit("close")}}};const Pt=(0,c.Z)(Mt,[["render",At],["__scopeId","data-v-730afb56"]]);var Ht=Pt;const Kt=(0,a.ri)(g);Kt.component("coach-base",Dt),Kt.component("base-badge",Ft),Kt.component("base-button",St),Kt.component("base-spinner",Bt),Kt.component("base-dialog",Ht),Kt.use(Je),Kt.use(Ct.Z,Ee),Kt.use(bt),Kt.mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a](o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,a,r,o){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],o=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,n=a[0],i=a[1],l=a[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var c=l(s)}for(t&&t(a);u<n.length;u++)o=n[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},a=self["webpackChunkvue_new_sift"]=self["webpackChunkvue_new_sift"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(760)}));a=s.O(a)})();
//# sourceMappingURL=app.e244ecbb.js.map